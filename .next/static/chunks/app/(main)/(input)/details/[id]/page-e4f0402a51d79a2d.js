(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{10202:(e,t,a)=>{"use strict";a.d(t,{Au:()=>d,Co:()=>o,QL:()=>l,Zb:()=>c,le:()=>n,sY:()=>r,yv:()=>i});var s=a(59921);let r=async e=>{try{let t=await s.A.post("/api/content/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Error signing in."}}},l=async e=>{try{let t=await s.A.get("/api/content/".concat(e),{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,r,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error fetching locations."}}},n=async(e,t)=>{try{let a=await s.A.put("/api/content/".concat(t),e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,r;return{success:!1,message:(null==(r=e.response)||null==(a=r.data)?void 0:a.detail)||"Error signing in."}}},i=async(e,t)=>{try{let a=await s.A.get("/api/content/".concat(e,"/version/").concat(t),{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,r,l,n;return{success:!1,message:(null==(r=e.response)||null==(a=r.data)?void 0:a.detail)||(null==(n=e.response)||null==(l=n.data)?void 0:l.message)||"Error fetching locations."}}},o=async e=>{try{let t=await s.A.get("/api/content/status-wise-count",{params:e,headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,r,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error fetching status wise count."}}},d=async e=>{try{let t=await s.A.get("/api/content/priority-wise-count",{params:e,headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,r,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error fetching status wise count."}}},c=async(e,t)=>{try{let a=await s.A.put("/api/content/".concat(e,"/status"),t,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,r,l,n;return{success:!1,message:(null==(r=e.response)||null==(a=r.data)?void 0:a.detail)||(null==(n=e.response)||null==(l=n.data)?void 0:l.message)||"Error updating content status."}}}},15193:(e,t,a)=>{Promise.resolve().then(a.bind(a,58218))},53422:(e,t,a)=>{"use strict";a.d(t,{fn:()=>d,tL:()=>c});var s=a(95155),r=a(12115),l=a(59921);let n=async()=>{var e,t,a,s,r,n,i,o,d,c,u,m,x,p,b,h,g,f,v;let j=localStorage.getItem("token");try{let p=(await l.A.get("/api/content/count",{headers:{"Content-Type":"application/json",...j&&{Authorization:"Bearer ".concat(j)}}})).data;return p.success&&p.data&&(p=p.data),{draft:Number(null==(e=p["1"])?void 0:e.count)||0,waitList:Number(null==(t=p["2"])?void 0:t.count)||0,waitingInOutput:Number(null==(a=p["3"])?void 0:a.count)||0,rejected:Number(null==(s=p["4"])?void 0:s.count)||0,published:Number(null==(r=p["5"])?void 0:r.count)||0,deleted:Number(null==(n=p["6"])?void 0:n.count)||0,inputToStringer:Number(null==(i=p["7"])?void 0:i.count)||0,outputToInput:Number(null==(o=p["8"])?void 0:o.count)||0,inputWip:Number(null==(d=p["9"])?void 0:d.count)||0,outputWip:Number(null==(c=p["10"])?void 0:c.count)||0,outputToStringer:Number(null==(u=p["11"])?void 0:u.count)||0,stringerToOutput:Number(null==(m=p["12"])?void 0:m.count)||0,shared:Number(null==(x=p["13"])?void 0:x.count)||0}}catch(e){throw Error((null==(b=e.response)||null==(p=b.data)?void 0:p.message)||(null==(g=e.response)||null==(h=g.data)?void 0:h.detail)||(null==(v=e.response)||null==(f=v.data)?void 0:f.error)||e.message||"Failed to fetch counts")}},i={draft:0,waitList:0,waitingInOutput:0,rejected:0,published:0,deleted:0,inputToStringer:0,outputToInput:0,inputWip:0,outputWip:0,outputToStringer:0,stringerToOutput:0,shared:0},o=(0,r.createContext)(void 0),d=e=>{let{children:t}=e,[a,l]=(0,r.useState)(i),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),x=(0,r.useRef)(!0),p=(0,r.useCallback)(async()=>{if(x.current)try{c(!0),m(null);let e=await n();x.current&&l(e)}catch(e){x.current&&m(e instanceof Error?e.message:"Failed to fetch counts")}finally{x.current&&c(!1)}},[]),b=(0,r.useCallback)((e,t)=>{l(a=>({...a,[e]:t}))},[]);return(0,r.useEffect)(()=>(x.current=!0,p(),()=>{x.current=!1}),[p]),(0,r.useEffect)(()=>{let e=()=>{x.current&&!document.hidden&&p()},t=()=>{!document.hidden&&x.current&&p()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",t)}},[p]),(0,s.jsx)(o.Provider,{value:{counts:a,isLoading:d,error:u,refreshCounts:p,updateCount:b},children:t})},c=()=>{let e=(0,r.useContext)(o);return void 0===e?{counts:i,isLoading:!1,error:null,refreshCounts:async()=>{},updateCount:()=>{}}:e}},58218:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var s=a(95155),r=a(12115),l=a(11518),n=a.n(l),i=a(27213),o=a(9803),d=a(99890),c=a(71007),u=a(4516),m=a(66474),x=a(57100),p=a(32919),b=a(62278),h=a(10202),g=a(35695),f=a(69074),v=a(84616),j=a(14186),y=a(33786),w=a(59469),N=a(59921);let _=async e=>{try{let t=await N.A.get("/api/published_at/content/".concat(e),{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,s,r;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Error adding role."}}},S=async e=>{try{let t=await N.A.post("/api/published_at/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,s,r;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Error adding role."}}},E=e=>{let{onScheduleAdd:t,className:a="",contentId:l}=e,[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([{value:"",label:"Select Platform"}]),[p,b]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(l)try{let e=await _(l);if((null==e?void 0:e.success)&&Array.isArray(e.data)){let t=e.data.map(e=>{var t,a,s,r;return{id:(null==(t=e.id)?void 0:t.toString())||Date.now().toString(),platform:(null==(a=e.price_tag)?void 0:a.type)||e.price_type||"Unknown",publishTime:e.publish_url_time||"",price_tag_id:null==(s=e.price_tag_id)?void 0:s.toString(),content_id:null==(r=e.content_id)?void 0:r.toString(),price:e.price||"",price_type:e.price_type||"",updated_date:e.updated_date||""}});u(t)}else if(Array.isArray(e)){let t=e.map(e=>{var t,a,s,r;return{id:(null==(t=e.id)?void 0:t.toString())||Date.now().toString(),platform:(null==(a=e.price_tag)?void 0:a.type)||e.price_type||"Unknown",publishTime:e.publish_url_time||"",price_tag_id:null==(s=e.price_tag_id)?void 0:s.toString(),content_id:null==(r=e.content_id)?void 0:r.toString(),price:e.price||"",price_type:e.price_type||"",updated_date:e.updated_date||""}});u(t)}}catch(e){console.error("Failed to fetch existing publish schedules:",e)}try{b(!0),g(null);let e=await (0,w.U)(),t=[{value:"",label:"Select Platform"}];if((null==e?void 0:e.success)&&Array.isArray(e.data)){let a=e.data.map(e=>{var t;return{value:e.type,label:e.type_text,id:null==(t=e.id)?void 0:t.toString()}});t.push(...a)}else if(Array.isArray(e)){let a=e.map(e=>{var t;return{value:e.type,label:e.type_text,id:null==(t=e.id)?void 0:t.toString()}});t.push(...a)}x(t)}catch(e){g("Failed to load platforms: ".concat(e))}finally{b(!1)}})()},[]);let N=async()=>{if(l)try{let e=await _(l);if((null==e?void 0:e.success)&&Array.isArray(e.data)){let t=e.data.map(e=>{var t,a,s,r;return{id:(null==(t=e.id)?void 0:t.toString())||Date.now().toString(),platform:(null==(a=e.price_tag)?void 0:a.type)||e.price_type||"Unknown",publishTime:e.publish_url_time||"",price_tag_id:null==(s=e.price_tag_id)?void 0:s.toString(),content_id:null==(r=e.content_id)?void 0:r.toString(),price:e.price||"",price_type:e.price_type||"",updated_date:e.updated_date||""}});u(t)}else if(Array.isArray(e)){let t=e.map(e=>{var t,a,s,r;return{id:(null==(t=e.id)?void 0:t.toString())||Date.now().toString(),platform:(null==(a=e.price_tag)?void 0:a.type)||e.price_type||"Unknown",publishTime:e.publish_url_time||"",price_tag_id:null==(s=e.price_tag_id)?void 0:s.toString(),content_id:null==(r=e.content_id)?void 0:r.toString(),price:e.price||"",price_type:e.price_type||"",updated_date:e.updated_date||""}});u(t)}}catch(e){console.error("Failed to fetch existing publish schedules:",e)}},E=async e=>{if(e.preventDefault(),!n||!o)return void alert("Please select a platform and enter publish time");let a=(e=>{let t=m.find(t=>t.value===e);return(null==t?void 0:t.id)||"1"})(n),s=o;if("TV"===n&&o){let e=new Date(o);isNaN(e.getTime())||(s=e.toISOString())}let r={id:Date.now().toString(),platform:n,publishTime:s,price_tag_id:a,content_id:l};u(e=>[...e,r]),t&&t(r);try{let e={price_tag_id:a,content_id:l,publish_url_time:s},t=await S(e);if(!t.success){alert("Error: ".concat(t.message)),u(e=>e.filter(e=>e.id!==r.id));return}await N()}catch(e){alert("Failed to add publish schedule. Please try again."),u(e=>e.filter(e=>e.id!==r.id));return}i(""),d("")},T=e=>{let t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length<=t?e:e.substring(0,t)+"..."},A="TV"===n;return(0,s.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-sm border border-gray-200 ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-3 border-b border-gray-200",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,s.jsx)(f.A,{className:"mr-3 text-blue-600",size:20}),"Publish At"]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[c.length," scheduled"]})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-5 mb-6",children:(0,s.jsx)("form",{onSubmit:E,children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),(0,s.jsx)("select",{id:"platform",value:n,onChange:e=>i(e.target.value),disabled:p,className:"w-full px-3 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed bg-white",children:p?(0,s.jsx)("option",{value:"",children:"Loading platforms..."}):m.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),h&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"publishTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Publish Time / Url"}),A?(0,s.jsx)("input",{type:"datetime-local",id:"publishTime",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"}):(0,s.jsx)("input",{type:"text",id:"publishTime",value:o,onChange:e=>d(e.target.value),placeholder:"Enter publish URL",className:"w-full px-3 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]}),(0,s.jsxs)("button",{type:"submit",disabled:p,className:"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center justify-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,s.jsx)(v.A,{size:16}),"Add"]})]})})}),c.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[(0,s.jsx)(j.A,{className:"mr-2 text-gray-600",size:18}),"Scheduled Publications"]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Publish Time/URL"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors ".concat(t%2==0?"bg-white":"bg-gray-25"),children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full border border-blue-200",children:e.price_type||(e=>{let t=m.find(t=>t.value===e);return t?t.label:e})(e.platform)})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(e=>{try{return new URL(e),!0}catch(t){return e.startsWith("http://")||e.startsWith("https://")}})(e.publishTime)?(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("a",{href:e.publishTime,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline text-sm flex items-center",title:e.publishTime,children:[(0,s.jsx)(y.A,{className:"mr-1 flex-shrink-0",size:12}),(0,s.jsx)("span",{className:"break-all",children:k(e.publishTime)})]})}):(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,s.jsx)(j.A,{className:"mr-2 text-gray-400 flex-shrink-0",size:14}),(0,s.jsx)("span",{children:T(e.publishTime)})]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:e.price?(0,s.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["â‚¹",e.price]}):(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"-"})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:e.updated_date?(0,s.jsx)("span",{className:"text-xs text-gray-500",children:T(e.updated_date)}):(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})]},e.id))})]})})]})]})};var T=a(53422);let k=async e=>{try{let t=await N.A.post("api/comment/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,s,r;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Error fetching locations."}}};var A=a(84105),C=a(6874),R=a.n(C),O=a(66766);let U=(0,b.A)(()=>{var e,t,a;let{user:l}=(0,A.A)(),b=(0,g.useRouter)();console.log("============sujit============="),console.log(l),console.log("============sujit=============");let{refreshCounts:f}=(0,T.tL)(),v=(0,g.useParams)(),j=Array.isArray(null==v?void 0:v.id)?v.id[0]:null==v?void 0:v.id,[y,w]=(0,r.useState)("overview"),[N,_]=(0,r.useState)(!1),[S,C]=(0,r.useState)({activities:[],comments:[]}),U=(0,r.useRef)(null),L=(0,r.useRef)(null),I=(0,r.useRef)(null),P=(0,r.useRef)(null),D=(0,r.useRef)(null),z=(0,r.useRef)(null),[F,W]=(0,r.useState)(""),[M,Z]=(0,r.useState)(!1),[G,V]=(0,r.useState)(""),[B,q]=(0,r.useState)(""),[K,Q]=(0,r.useState)(""),[Y,H]=(0,r.useState)(""),[J,X]=(0,r.useState)(""),[$,ee]=(0,r.useState)([]),[et,ea]=(0,r.useState)(null),[es,er]=(0,r.useState)(""),[el,en]=(0,r.useState)(""),[ei,eo]=(0,r.useState)(""),[ed,ec]=(0,r.useState)(""),[eu,em]=(0,r.useState)(""),[ex,ep]=(0,r.useState)(""),[eb,eh]=(0,r.useState)(1),[eg,ef]=(0,r.useState)(0),[ev,ej]=(0,r.useState)(null);(0,r.useEffect)(()=>{j&&ey()},[j]);let ey=async()=>{try{var e,t;let a=(await (0,h.QL)(j)).data;ef(a.locked||0),ej(a.lock||{}),console.log("=====jjj========"),console.log(a.lock),console.log(ev),console.log("=====jjj========"),V(a.priority_text||""),q(a.content_type_text||""),Q(a.headline||""),H(a.created_name||""),ea(a.location?{id:a.location.id||"",name:a.location.name||a.location}:null),er(a.description||""),X((null==(t=a.tags)||null==(e=t[0])?void 0:e.name)||""),ee(a.attachments||[]),en(a.created_date||""),eo(a.updated_date||""),ec(a.status_text||"draft"),em(a.status);let s=a.version_number||1;ep(s),eh(s),C(e=>({...e,comments:a.comments||[]}))}catch(e){console.error("Error fetching content:",e)}},ew=async e=>{try{var t,a;eh(e);let s=(await (0,h.yv)(j,e)).data;V(s.priority_text||""),q(s.content_type_text||""),Q(s.headline||""),H(s.created_name||""),ea(s.location?{id:s.location.id||"",name:s.location.name||s.location}:null),er(s.description||""),X((null==(a=s.tags)||null==(t=a[0])?void 0:t.name)||""),ee(s.attachments||[]),en(s.created_date||""),eo(s.updated_date||""),ec(s.status_text||"draft"),_(!1)}catch(e){console.error("Error fetching version data:",e)}},eN=e=>e.split("/").pop()||e,e_=e=>e.startsWith("image/"),eS=e=>e.startsWith("video/"),eE=async()=>{if(F.trim()&&!M){if(!j)return void console.error("Content ID is not available");Z(!0);try{let e={content_id:parseInt(j),comment_text:F.trim()},t=await k(e);(null==t?void 0:t.data)&&(await ey(),W(""))}catch(e){console.error("Error adding comment:",e)}finally{Z(!1)}}};(0,r.useEffect)(()=>{let e=new IntersectionObserver(e=>{let t=null,a=0;e.forEach(e=>{e.intersectionRatio>a&&(a=e.intersectionRatio,t=e.target.getAttribute("data-section"))}),t&&a>.3&&w(t)},{root:z.current,rootMargin:"-260px 0px -200px 0px",threshold:[0,.3,.5,.8,1]}),t=setTimeout(()=>{[U.current,L.current,I.current,P.current].forEach(t=>{t&&e.observe(t)})},100);return()=>{clearTimeout(t),[U.current,L.current,I.current,P.current].forEach(t=>{t&&e.unobserve(t)})}},[]);let eT=e=>{let t;switch(e){case"overview":t=U;break;case"attachments":t=L;break;case"activities":t=I;break;case"publishAt":t=P;break;default:return}if(t.current&&z.current){let e=z.current,a=t.current,s=e.getBoundingClientRect(),r=a.getBoundingClientRect(),l=e.scrollTop,n=r.top-s.top+l-160;e.scrollTo({top:Math.max(0,n),behavior:"smooth"})}};(0,r.useEffect)(()=>{let e=e=>{D.current&&!D.current.contains(e.target)&&_(!1)};if(N)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N]);let ek=async()=>{try{var e;let t=await (0,h.Zb)(j,{status:"7"});(null==t||null==(e=t.data)?void 0:e.success)===!0?(await f(),b.push("/update/".concat(j))):b.push("/list/input/waitList")}catch(e){console.error("Error:",e),b.push("/list/input/waitList")}},eA=async()=>{try{await (0,h.Zb)(j,{status:"3"}),await f(),b.push("/list/input/waitingInOutput")}catch(e){console.error("Error:",e),b.push("/list/input/waitingInOutput")}},eC=async()=>{try{var e;let t=await (0,h.Zb)(j,{status:"11"});(null==t||null==(e=t.data)?void 0:e.success)===!0?(await f(),b.push("/update/".concat(j))):b.push("/list/input/waitingInOutput")}catch(e){console.error("Error:",e),b.push("/list/input/waitingInOutput")}},eR=async()=>{try{await (0,h.Zb)(j,{status:"8"}),await f(),b.push("/list/input/outputToInput")}catch(e){console.error("Error:",e),b.push("/list/input/outputToInput")}},eO=async()=>{try{(null==l?void 0:l.role_name)==="ROLE_INPUT"&&await (0,h.Zb)(j,{status:"9"}),(null==l?void 0:l.role_name)==="ROLE_OUTPUT"&&await (0,h.Zb)(j,{status:"10"}),await f(),b.push("/update/".concat(j))}catch(e){console.error("Error:",e),b.push("/update/".concat(j))}};return(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 w-full bg-gray-50 h-screen overflow-hidden flex flex-col",children:[(0,s.jsx)(n(),{id:"681f10978a9647b6",children:".scrollbar-hidden.jsx-681f10978a9647b6{scrollbar-width:none;-ms-overflow-style:none}.scrollbar-hidden.jsx-681f10978a9647b6::-webkit-scrollbar{display:none}"}),(0,s.jsxs)("div",{ref:z,className:"jsx-681f10978a9647b6 flex-1 overflow-y-auto scrollbar-hidden",children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 sticky top-0 z-20 bg-gray-50 max-w-7xl py-4",children:(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 bg-white rounded-lg shadow-sm border-2 border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex justify-between mb-2",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-8 mb-4 divide-x divide-gray-300 overflow-x-auto scrollbar-hidden",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 whitespace-nowrap",children:[(0,s.jsx)(c.A,{size:16,className:"text-gray-500"}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 text-sm font-semibold text-gray-800",children:String(Y||"")})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 pl-4 whitespace-nowrap",children:[(0,s.jsx)(u.A,{size:16,className:"text-gray-500"}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 text-sm font-semibold text-gray-800",children:(null==et?void 0:et.name)||"No location"})]}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 pl-4 whitespace-nowrap",children:(0,s.jsx)("button",{className:"jsx-681f10978a9647b6 "+"px-3 py-1 rounded-full text-xs font-semibold text-white transition-colors ".concat("high"===String(G||"").toLowerCase()?"bg-red-500 hover:bg-red-600":"medium"===String(G||"").toLowerCase()?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"),children:G||"Low"})}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 pl-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 text-sm font-semibold text-gray-800",children:String(B||"").toUpperCase()})]}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 pl-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 text-sm font-semibold text-gray-800",children:String(J||"")})})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex justify-between items-center",children:[(0,s.jsxs)("div",{ref:D,className:"jsx-681f10978a9647b6 relative p-2 text-green-600 hover:text-green-800 bg-green-200 hover:bg-green-300 border-2 border-green-500 rounded-md transition-colors",children:[(0,s.jsxs)("button",{onClick:()=>_(!N),className:"jsx-681f10978a9647b6 flex items-center space-x-1 text-gray-700 hover:text-gray-900 transition-colors",children:[(0,s.jsxs)("span",{className:"jsx-681f10978a9647b6 text-sm font-medium",children:["v",eb]}),(0,s.jsx)(m.A,{size:14,className:"transition-transform ".concat(N?"rotate-180":"")})]}),N&&(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 absolute left-0 mt-1 bg-white rounded-md shadow-lg border border-gray-200 z-30 min-w-16",children:(e=>{if(!e||e<1)return[1];let t=[];for(let a=e;a>=1;a--)t.push(a);return t})(ex).map(e=>(0,s.jsxs)("button",{onClick:()=>ew(e),className:"jsx-681f10978a9647b6 "+"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 transition-colors first:rounded-t-md last:rounded-b-md ".concat(eb===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"),children:["v",e,e===ex&&(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 ml-2 text-xs text-gray-500"})]},e))})]}),(null==l?void 0:l.role_name)=="ROLE_INPUT"&&(null==ev?void 0:ev.locked_by)==(null==l?void 0:l.user_id)&&1==eg&&"9"==eu&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(R(),{href:"/update/".concat(j),className:"relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Edit"})]})}),(null==l?void 0:l.role_name)=="ROLE_OUTPUT"&&(null==ev?void 0:ev.locked_by)==(null==l?void 0:l.user_id)&&1==eg&&"10"==eu&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(R(),{href:"/update/".concat(j),className:"relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Edit"})]})}),(null==l?void 0:l.role_name)==="ROLE_INPUT"&&"2"==eu?String(eb)===String(ex)?(0,s.jsxs)("button",{type:"button",onClick:eO,className:"jsx-681f10978a9647b6 relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(p.A,{size:16}),(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Lock & Edit"})]}):(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 p-2 text-gray-400 bg-gray-100 border-2 border-gray-300 rounded-md ml-4 inline-block cursor-not-allowed",children:(0,s.jsx)(x.A,{size:16})}):null,(null==l?void 0:l.role_name)==="ROLE_OUTPUT"&&"3"==eu?String(eb)===String(ex)?(0,s.jsxs)("button",{type:"button",onClick:eO,className:"jsx-681f10978a9647b6 relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(p.A,{size:16}),(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Lock & Edit"})]}):(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 p-2 text-gray-400 bg-gray-100 border-2 border-gray-300 rounded-md ml-4 inline-block cursor-not-allowed",children:(0,s.jsx)(x.A,{size:16})}):null,"1"==eu?String(eb)===String(ex)?(0,s.jsxs)(R(),{href:"/update/".concat(j),className:"relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Edit"})]}):(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 p-2 text-gray-400 bg-gray-100 border-2 border-gray-300 rounded-md ml-4 inline-block cursor-not-allowed",children:(0,s.jsx)(x.A,{size:16})}):null,(null==l?void 0:l.role_name)==="ROLE_STRINGER"&&("7"==eu||"11"==eu)?String(eb)===String(ex)?(0,s.jsxs)(R(),{href:"/update/".concat(j),className:"relative group p-2 text-blue-600 hover:text-blue-800 bg-blue-200 hover:bg-blue-50 border-2 border-blue-500 rounded-md transition-colors ml-4 inline-flex items-center gap-1",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap shadow-lg",children:"Edit"})]}):(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 p-2 text-gray-400 bg-gray-100 border-2 border-gray-300 rounded-md ml-4 inline-block cursor-not-allowed",children:(0,s.jsx)(x.A,{size:16})}):null]})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex justify-between",children:[(0,s.jsxs)("nav",{className:"jsx-681f10978a9647b6 flex space-x-8",children:[(0,s.jsx)("button",{onClick:()=>eT("overview"),className:"jsx-681f10978a9647b6 "+"py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat("overview"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Overview"}),(0,s.jsxs)("button",{onClick:()=>eT("attachments"),className:"jsx-681f10978a9647b6 "+"py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat("attachments"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Attachments (",null!=(e=null==$?void 0:$.length)?e:0,")"]}),(0,s.jsxs)("button",{onClick:()=>eT("activities"),className:"jsx-681f10978a9647b6 "+"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat("activities"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Activities (",null!=(t=null==$?void 0:$.length)?t:0,")"]}),(null==l?void 0:l.role_name)!=="ROLE_STRINGER"&&(0,s.jsx)("button",{onClick:()=>eT("publishAt"),className:"jsx-681f10978a9647b6 "+"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat("publishAt"===y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Publish At"})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-center space-x-2 pl-4",children:[(null==l?void 0:l.role_name)==="ROLE_INPUT"&&"2"==eu&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:ek,className:"jsx-681f10978a9647b6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:"RETURN TO REPORTER"}),(0,s.jsx)("button",{onClick:eA,className:"jsx-681f10978a9647b6 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium transition-colors",children:"MOVE TO OUTPUT"})]}),(null==l?void 0:l.role_name)=="ROLE_INPUT"&&(null==ev?void 0:ev.locked_by)==(null==l?void 0:l.user_id)&&1==eg&&"9"==eu&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:ek,className:"jsx-681f10978a9647b6 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:"RETURN TO REPORTER"}),(0,s.jsx)("button",{onClick:eA,className:"jsx-681f10978a9647b6 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium transition-colors",children:"MOVE TO OUTPUT"})]}),(null==l?void 0:l.role_name)==="ROLE_OUTPUT"&&"3"==eu&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:eC,className:"jsx-681f10978a9647b6 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium transition-colors",children:"RETURN TO REPORTER"}),(0,s.jsx)("button",{onClick:eR,className:"jsx-681f10978a9647b6 px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm font-medium transition-colors",children:"RETURN TO INPUT"})]}),(null==l?void 0:l.role_name)=="ROLE_OUTPUT"&&(null==ev?void 0:ev.locked_by)==(null==l?void 0:l.user_id)&&1==eg&&"10"==eu&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:eC,className:"jsx-681f10978a9647b6 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium transition-colors",children:"RETURN TO REPORTER"}),(0,s.jsx)("button",{onClick:eR,className:"jsx-681f10978a9647b6 px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm font-medium transition-colors",children:"RETURN TO INPUT"})]})]})]})]})}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 max-w-7xl",children:[(0,s.jsx)("div",{ref:U,"data-section":"overview",className:"jsx-681f10978a9647b6 bg-white rounded-lg shadow-md border-2 border-gray-200 scroll-mt-40 mb-6",children:(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 p-6",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 space-y-8",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"jsx-681f10978a9647b6 text-sm font-bold text-blue-700 uppercase tracking-wide mb-3 bg-blue-100 px-3 py-1 rounded-full inline-block",children:"\uD83D\uDCDD TITLE"}),(0,s.jsx)("p",{className:"jsx-681f10978a9647b6 text-gray-900 font-medium text-lg leading-relaxed",children:String(K||"No title set")})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"jsx-681f10978a9647b6 text-sm font-bold text-green-700 uppercase tracking-wide mb-3 bg-green-100 px-3 py-1 rounded-full inline-block",children:"\uD83D\uDCC4 DESCRIPTION"}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:String(es||"No description set")},className:"jsx-681f10978a9647b6 text-gray-900 prose max-w-none"})]})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 grid grid-cols-3 gap-4 text-sm mt-6 pt-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6",children:[(0,s.jsx)("h4",{className:"jsx-681f10978a9647b6 text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"CREATED"}),(0,s.jsx)("p",{className:"jsx-681f10978a9647b6 text-gray-700",children:String(el||"")})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6",children:[(0,s.jsx)("h4",{className:"jsx-681f10978a9647b6 text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"UPDATED"}),(0,s.jsx)("p",{className:"jsx-681f10978a9647b6 text-gray-700",children:String(ei||"")})]}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6",children:[(0,s.jsx)("h4",{className:"jsx-681f10978a9647b6 text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"STATUS"}),(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 "+"inline-flex px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(String(e||"").toLowerCase()){case"verification pending":return"bg-orange-100 text-orange-700 border-orange-200";case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":default:return"bg-gray-100 text-gray-700 border-gray-200";case"rejected":return"bg-red-100 text-red-700 border-red-200";case"waiting in input":return"bg-yellow-100 text-yellow-700 border-yellow-200"}})(ed)),children:String(ed||"draft")})]})]})]})}),(0,s.jsx)("div",{ref:L,"data-section":"attachments",className:"jsx-681f10978a9647b6 bg-white rounded-lg shadow-sm border border-gray-200 scroll-mt-40 mb-4",children:(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 p-6",children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 flex items-center justify-between mb-6",children:(0,s.jsxs)("h2",{className:"jsx-681f10978a9647b6 text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 flex items-center",children:[(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 mr-2",children:"\uD83D\uDCCE"}),"Attachments (",null!=(a=null==$?void 0:$.length)?a:0,")"]})}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 grid grid-cols-4 gap-3",children:$.map((e,t)=>(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 relative group",children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 aspect-square bg-gray-100 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:e_(e.mime)?(0,s.jsx)("a",{href:"".concat("https://spassets.odishatv.in","/").concat(e.path),target:"_blank",rel:"noopener noreferrer",className:"jsx-681f10978a9647b6 attachment-link",children:(0,s.jsx)(O.default,{src:"".concat("https://spassets.odishatv.in","/").concat(e.path),alt:eN(e.path),className:"w-full h-full object-cover rounded-lg"})}):eS(e.mime)?(0,s.jsx)("a",{href:"".concat("https://spassets.odishatv.in","/").concat(e.path),target:"_blank",rel:"noopener noreferrer",className:"jsx-681f10978a9647b6 attachment-link",children:(0,s.jsx)("video",{src:"".concat("https://spassets.odishatv.in","/").concat(e.path),muted:!0,preload:"metadata",className:"jsx-681f10978a9647b6 w-full h-full object-cover rounded-lg"})}):(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 w-full h-full flex items-center justify-center",children:(e=>e_(e)?(0,s.jsx)(i.A,{size:48,className:"text-blue-400"}):eS(e)?(0,s.jsx)(o.A,{size:48,className:"text-purple-400"}):(0,s.jsx)(d.A,{size:48,className:"text-gray-400"}))(e.mime)})}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 "+"absolute bottom-2 right-2 text-white px-2 py-1 rounded text-xs font-medium ".concat((e=>e_(e)?"bg-blue-500":eS(e)?"bg-purple-500":"bg-gray-500")(e.mime)),children:(e=>e_(e)?"IMAGE":eS(e)?"VIDEO":"FILE")(e.mime)}),(0,s.jsx)("div",{title:eN(e.path),className:"jsx-681f10978a9647b6 mt-2 text-sm text-gray-600 truncate",children:eN(e.path)})]},t))}),0===$.length&&(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 text-center py-8 text-gray-500",children:"No attachments yet"})]})}),(0,s.jsx)("div",{ref:I,"data-section":"activities",className:"jsx-681f10978a9647b6 bg-white shadow-sm border border-gray-200 scroll-mt-40 mb-4 rounded-lg",children:(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 p-4",children:[(0,s.jsxs)("h2",{className:"jsx-681f10978a9647b6 text-lg font-semibold text-gray-800 mb-6 border-b border-gray-200 pb-2 flex items-center",children:[(0,s.jsx)("span",{className:"jsx-681f10978a9647b6 mr-2",children:"\uD83D\uDCAC"}),"Comments (",S.comments.length,")"]}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 max-h-56 overflow-y-auto space-y-4 pb-4",children:S.comments.map((e,t)=>{let a=e.created_by===l.user_id,r=t>0&&S.comments[t-1].created_by===e.created_by;return(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 "+"flex ".concat(a?"justify-end":"justify-start"," ").concat(r?"mt-1":"mt-4"),children:[!a&&(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 flex-shrink-0 mr-3",children:(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:(e.user_name||"U").charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 "+"max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ".concat(a?"bg-blue-500 text-white rounded-br-md":"bg-gray-100 text-gray-900 rounded-bl-md"),children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 text-sm",children:e.comment_text}),(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 "+"text-xs mt-1 ".concat(a?"text-blue-100":"text-gray-500"),children:[e.user_name," | ",(e=>{let t=new Date(e),a=(new Date().getTime()-t.getTime())/36e5;return a<1?"Just now":a<24?"".concat(Math.floor(a)," hours ago"):a<48?"Yesterday":t.toLocaleDateString()})(e.created_date)]})]}),a&&(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 flex-shrink-0 ml-3",children:(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:(e.user_name||"U").charAt(0).toUpperCase()})})]},e.id)})}),0===S.comments.length&&(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 text-center py-8 text-gray-500",children:[(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:"\uD83D\uDCAC"}),"No comments yet"]}),(0,s.jsx)("div",{className:"jsx-681f10978a9647b6 mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"jsx-681f10978a9647b6 flex items-start space-x-2",children:[(0,s.jsx)("textarea",{value:F,onChange:e=>W(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eE())},placeholder:"Add a comment...",disabled:M,rows:2,className:"jsx-681f10978a9647b6 flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 resize-none"}),(0,s.jsx)("button",{onClick:eE,disabled:!F.trim()||M,className:"jsx-681f10978a9647b6 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed mt-1",children:M?"Sending...":"Send"})]})})]})}),(null==l?void 0:l.role_name)!=="ROLE_STRINGER"&&(0,s.jsx)("div",{ref:P,"data-section":"publishAt",className:"jsx-681f10978a9647b6 bg-white shadow-sm border border-gray-200 scroll-mt-40 mb-4 rounded-lg",children:(0,s.jsx)(E,{contentId:j})})]})]})]})});function L(){return function(){let[e,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[])}(),(0,s.jsx)(U,{})}},59469:(e,t,a)=>{"use strict";a.d(t,{O:()=>l,U:()=>r});var s=a(59921);let r=async()=>{try{let e=await s.A.get("/api/price_tag/",{headers:{"Content-Type":"application/json"}});return{success:!0,data:e.data}}catch(s){var e,t,a,r;return{success:!1,message:(null==(t=s.response)||null==(e=t.data)?void 0:e.detail)||(null==(r=s.response)||null==(a=r.data)?void 0:a.message)||"Error fetching roles."}}},l=async e=>{try{let t=await s.A.post("/api/price_tag/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,r,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error fetching locations."}}}},59576:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>o});var s=a(95155),r=a(12115),l=a(35695),n=a(29159);let i=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),u=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("tokenExpiration");if(e&&t)if(new Date().getTime()<parseInt(t))try{let t=(0,n.s)(e);o({user_id:(null==t?void 0:t.user_id)||"0",email:(null==t?void 0:t.email)||"",name:(null==t?void 0:t.name)||"",phone:(null==t?void 0:t.phone)||"",role_id:(null==t?void 0:t.role_id)||"",role_name:(null==t?void 0:t.role_name)||"",role_data:(null==t?void 0:t.role_data)||{}})}catch(e){console.error("Error decoding token:",e),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration")}else localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration");c(!1)},[]),(0,s.jsx)(i.Provider,{value:{user:a,loading:d,isAuthenticated:!!a,login:e=>{try{let t=new Date().getTime()+288e5;localStorage.setItem("token",e),localStorage.setItem("tokenExpiration",t.toString());let a=(0,n.s)(e);o({user_id:(null==a?void 0:a.user_id)||"Guest",email:(null==a?void 0:a.email)||"",name:(null==a?void 0:a.name)||"",phone:(null==a?void 0:a.phone)||"",role_id:(null==a?void 0:a.role_id)||"",role_name:(null==a?void 0:a.role_name)||"",role_data:(null==a?void 0:a.role_data)||{}})}catch(e){console.error("Error during login:",e)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration"),o(null),u.replace("/login")}},children:t})},d=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},59921:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let s=a(23464).A.create({baseURL:"https://sppyapi.odishatv.in"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let r=s},62278:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95155),r=a(12115),l=a(35695),n=a(59576);let i=e=>{let t=t=>{let a=(0,l.useRouter)(),{isAuthenticated:i,loading:o}=(0,n.A)();return((0,r.useEffect)(()=>{o||i||(a.replace("/login"),setTimeout(()=>{"/login"!==window.location.pathname&&(window.location.href="/login")},100))},[i,o,a]),o||!i)?null:(0,s.jsx)(e,{...t})};return t.displayName="withAuth(".concat(e.displayName||e.name,")"),t}},84105:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(59576);let r=()=>{let{user:e,loading:t,isAuthenticated:a,login:r,logout:l}=(0,s.A)();return{user:e,loading:t,isAuthenticated:a,login:r,logout:l}}}},e=>{e.O(0,[586,55,464,441,964,358],()=>e(e.s=15193)),_N_E=e.O()}]);